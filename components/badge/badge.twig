{#
/**
 * @file
 * Badge component - Etiqueta/insignia
 */
#}


{% set custom_class = css_class|default('') %}
{% set custom_id = html_id|default('') %}
{% set badge_text = text|default('') %}
{% set badge_variant = variant|default('primary') %}
{% set badge_size = size|default('medium') %}
{% set badge_style = style|default('solid') %}
{% set badge_rounded = rounded|default('full') %}
{% set badge_icon = icon|default('none') %}

{# Icon paths #}
{% set icon_paths = {
  'check': 'M5 13l4 4L19 7',
  'x': 'M6 18L18 6M6 6l12 12',
  'star': 'M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z',
  'clock': 'M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z',
  'alert': 'M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z'
} %}

{# Color mappings for solid style #}
{% set solid_colors = {
  'primary': 'bg-[var(--cats-primary)] text-white',
  'secondary': 'bg-[var(--cats-secondary)] text-white',
  'success': 'bg-green-600 text-white',
  'warning': 'bg-yellow-500 text-white',
  'error': 'bg-red-600 text-white',
  'info': 'bg-blue-600 text-white',
  'neutral': 'bg-gray-600 text-white'
} %}

{# Color mappings for soft style #}
{% set soft_colors = {
  'primary': 'bg-[var(--cats-primary)]/10 text-[var(--cats-primary)]',
  'secondary': 'bg-[var(--cats-secondary)]/10 text-[var(--cats-secondary)]',
  'success': 'bg-green-100 text-green-700',
  'warning': 'bg-yellow-100 text-yellow-700',
  'error': 'bg-red-100 text-red-700',
  'info': 'bg-blue-100 text-blue-700',
  'neutral': 'bg-gray-100 text-gray-700'
} %}

{# Color mappings for outline style #}
{% set outline_colors = {
  'primary': 'border border-[var(--cats-primary)] text-[var(--cats-primary)]',
  'secondary': 'border border-[var(--cats-secondary)] text-[var(--cats-secondary)]',
  'success': 'border border-green-600 text-green-600',
  'warning': 'border border-yellow-500 text-yellow-600',
  'error': 'border border-red-600 text-red-600',
  'info': 'border border-blue-600 text-blue-600',
  'neutral': 'border border-gray-600 text-gray-600'
} %}

{% set badge_cva =
  html_cva(
    base: ['cats-badge inline-flex items-center gap-1 font-medium'],
    variants: {
      size: {
        small: 'text-xs px-2 py-0.5',
        medium: 'text-sm px-2.5 py-1',
        large: 'text-base px-3 py-1.5'
      },
      rounded: {
        default: 'rounded',
        full: 'rounded-full'
      }
    }
  )
%}

{% set color_class = badge_style == 'solid' ? solid_colors[badge_variant] : (badge_style == 'soft' ? soft_colors[badge_variant] : outline_colors[badge_variant]) %}

{% set badge_classes =
  badge_cva.apply({
    size: badge_size,
    rounded: badge_rounded
  }) ~ ' ' ~ color_class
%}

{% set icon_size = badge_size == 'small' ? 'w-3 h-3' : (badge_size == 'large' ? 'w-4 h-4' : 'w-3.5 h-3.5') %}

<span class="{{ badge_classes }} {{ custom_class }}"{% if custom_id %} id="{{ custom_id }}"{% endif %}>
  {% if badge_icon != 'none' and icon_paths[badge_icon] is defined %}
    <svg class="{{ icon_size }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ icon_paths[badge_icon] }}"/>
    </svg>
  {% endif %}
  {{ badge_text }}
</span>
